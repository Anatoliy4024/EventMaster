
# EventMaster Project

## Версия от 30.08.2024

### 1. Суть проекта
Проект **EventMaster** предназначен для автоматизации процессов организации и управления мероприятиями. В рамках проекта реализованы два Telegram бота:

- **AdminBot**: предназначен для администрирования и управления мероприятиями.
- **PicnicBot**: бот для пользователей, который позволяет им бронировать мероприятия.

### 2. Файловая структура

Проект разделен на два основных компонента:

1. **AdminBot**: Основной бот для администрирования мероприятий.
2. **PicnicBot**: Бот для взаимодействия с конечными пользователями, которые хотят забронировать мероприятие.

```
EventMaster/
│
├── bot/
│   ├── admin_bot/
│   │   ├── helpers/
│   │   │   ├── logs/
│   │   │   │   └── admin_bot.log
│   │   │   └── database_helpers.py        # Обработчик выемки строки из БД
│   │   ├── keyboards/                     # Кнопки меню для admin_bot
│   │   ├── scenarios/
│   │   │   ├── __init__.py
│   │   │   ├── user_scenario.py           # Сценарий для юзеров
│   │   │   ├── organizer_scenario.py      # Сценарий для организатора
│   │   │   └── service_scenario.py        # Сценарий для сервисной службы
│   │   ├── __init__.py
│   │   ├── main.py
│   │   └── main_old.py                    # Копия рабочего старого main
│   ├── picnic_bot/
│   │   ├── step_handlers/
│   │   │   ├── __init__.py
│   │   │   ├── language_step.py           # Пошаговый обработчик для выбора языка
│   │   │   ├── date_step.py               # Пошаговый обработчик для выбора даты
│   │   │   ├── time_step.py               # Пошаговый обработчик для выбора времени
│   │   │   ├── people_step.py             # Пошаговый обработчик для выбора количества участников
│   │   │   └── style_step.py              # Пошаговый обработчик для выбора стиля мероприятия
│   │   ├── helpers/
│   │   │   ├── __init__.py
│   │   │   ├── db_helpers.py              # Функции для работы с базой данных
│   │   │   ├── picnic_functions.py        # Специфичные функции для PicnicBot
│   │   │   ├── order_calculation.py       # Модуль для расчета стоимости мероприятия
│   │   │   └── config.py                  # Конфигурационные данные
│   │   ├── keyboards/
│   │   │   ├── __init__.py
│   │   │   ├── picnic_keyboards.py        # Клавиатуры для PicnicBot
│   │   │   └── button_template.py         # Шаблоны кнопок
│   │   ├── db/
│   │   │   ├── __init__.py
│   │   │   ├── initialize_db.py           # Инициализация БД
│   │   │   ├── check_db_structure.py      # Проверка структуры БД
│   │   │   ├── view_database.py           # Просмотр данных из БД
│   │   │   └── sqlite.db                  # Файл базы данных SQLite для PicnicBot
│   │   ├── payments/
│   │   │   ├── __init__.py
│   │   │   ├── payment_processor.py       # Логика обработки платежей
│   │   │   ├── proforma_generator.py      # Генерация и сохранение проформ
│   │   │   └── confirmation_buttons.py    # Генерация кнопок "Да/Нет"
│   │   ├── constants.py                   # Константы для PicnicBot
│   │   └── main.py                        # Основной файл для запуска PicnicBot
│
├── main/
│   └── __init__.py
│
├── shared/
│   ├── db/
│   │   └── sqlite.db
│   ├── logs/
│   │   └── admin_bot.log
│   ├── __init__.py
│   ├── config.py
│   ├── constants.py
│   ├── translations.py
│   └── helpers.py                         # Общие вспомогательные функции для обоих ботов
│
└── utils/
    └── README.md

```

### 3. Архитектура

#### 3.1 Принцип модульности

Мы придерживаемся принципа модульности, разделяя функциональность на независимые модули. Это позволяет легко расширять и поддерживать код, а также повторно использовать его в других проектах.

#### 3.2 Модули AdminBot

1. **helpers/database_helpers.py**: Вспомогательные функции для работы с базой данных и отправки проформ пользователям.
2. **keyboards/**: Создание интерактивных клавиатур для взаимодействия с пользователем.
3. **scenarios/**:
   - `user_scenario.py`: Сценарий взаимодействия с пользователем.
   - `organizer_scenario.py`: Сценарий взаимодействия с организатором.
   - `service_scenario.py`: Сценарий взаимодействия с сервисной службой.
4. **main.py**: Основной файл для запуска AdminBot.

#### 3.3 Модули PicnicBot

1. **step_handlers/**: Обработчики шагов выбора (язык, дата, время, количество персон, стиль мероприятия).
2. **helpers/**:
   - `db_helpers.py`: Работа с базой данных.
   - `picnic_functions.py`: Специфичные функции для PicnicBot.
3. **keyboards/**: Клавиатуры и кнопки для взаимодействия с пользователями.
4. **db/**: Работа с базой данных и файл SQLite.
5. **payments/**: Модули для обработки платежей и генерации проформ.
6. **main.py**: Основной файл для запуска PicnicBot.

#### 3.4 Общие модули (shared/)

- **config.py**: Конфигурационные данные для обоих ботов.
- **constants.py**: Константы и временные данные.
- **translations.py**: Переводы текстов сообщений и кнопок на различные языки.
- **helpers.py**: Вспомогательные функции, используемые обоими ботами.

### 4. Новые компоненты в версии 2.0

#### 4.1 Добавлены следующие модули

1. **PicnicBot**: Новый бот, интегрированный с EventMaster, который позволяет пользователям бронировать мероприятия.
2. **step_handlers/**: Модули для пошаговой обработки взаимодействия с пользователем.
3. **payments/**: Модули для обработки платежей и генерации проформ.

### 5. Примечания

- В версии 2.0 реализована интеграция PicnicBot с AdminBot, что позволяет использовать общие ресурсы и модули.
- Улучшена структура проекта, что облегчает его дальнейшую поддержку и развитие.

